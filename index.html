<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>FPS Gameplay Review Tool</title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"><style>body{overflow-x:hidden}#video-container{position:relative;width:100%;max-width:640px;margin:0 auto}#video-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.video-comment{position:absolute;bottom:10%;left:5%;background:rgba(0,0,0,.8);color:#fff;padding:10px;border-radius:5px;max-width:90%;animation:fadeInOut 5s ease-in-out}@keyframes fadeInOut{0%{opacity:0}10%{opacity:1}90%{opacity:1}100%{opacity:0}}#timeline-container{position:relative;width:100%;max-width:640px;height:20px;background-color:#333;margin:10px auto}#timeline{position:relative;width:100%;height:100%}.timeline-marker{position:absolute;width:4px;height:100%;background-color:#f1c40f;cursor:pointer}#comment-feed{max-height:500px;overflow-y:auto}.comment-item.active{background-color:#f1c40f}.sentiment-good{background-color:#e0f8e0}.sentiment-warning{background-color:#fff8e0}.sentiment-bad{background-color:#f8e0e0}#sidebar{position:fixed;top:0;left:-250px;width:250px;height:100%;background-color:#343a40;overflow-y:auto;transition:.3s;z-index:1000}#sidebar.active{left:0}#sidebar .sidebar-header{padding:20px;background-color:#343a40;color:#fff}#sidebar ul.components{padding:0;list-style:none}#sidebar ul li{padding:15px;font-size:1.1em;display:block;color:#d1d1d1}#sidebar ul li a{color:#d1d1d1;text-decoration:none;display:block}#sidebar ul li:hover{background:#575d63;color:#fff;cursor:pointer}#overlay{position:fixed;display:none;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,.7);z-index:999}.disabled{pointer-events:none;opacity:.6}#toast-container{position:fixed;top:20px;right:20px;z-index:1055}.toast{min-width:200px}@media (max-width:768px){#sidebar{left:-250px}#sidebar.active{left:0}}.video-thumbnail{width:120px;height:90px;object-fit:cover}</style></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class="container-fluid"><button type="button" id="sidebarCollapse" class="btn btn-dark me-2" aria-label="Toggle sidebar"><i class="bi bi-list"></i></button><a class="navbar-brand" href="#">FPS Gameplay Review Tool</a><div class="ms-auto d-flex align-items-center"><button id="saved-videos-btn" class="btn btn-outline-light me-3" aria-label="Saved Videos" data-bs-toggle="tooltip" title="Saved Videos"><i class="bi bi-folder-fill"></i></button><div class="form-check form-switch text-white"><label class="form-check-label me-2" for="mode-toggle"><i class="bi bi-person-fill"></i> Mode: <span id="current-mode">Coach</span></label><input class="form-check-input" type="checkbox" id="mode-toggle" aria-label="Toggle mode"></div></div></div></nav><nav id="sidebar"><div class="sidebar-header"><h3><i class="bi bi-gear-fill"></i> Settings</h3></div><ul class="components"><li><a href="#" id="new-video-btn"><i class="bi bi-film"></i> Load New Video</a></li><li id="import-comments-li"><a href="#" id="import-comments-btn"><i class="bi bi-cloud-arrow-down-fill"></i> Import Comments</a></li><li><div class="form-check form-switch ms-2"><input class="form-check-input" type="checkbox" id="audio-notifications"><label class="form-check-label" for="audio-notifications">Enable Sound Notifications</label></div></li><li class="ms-2"><label for="audio-volume">Notification Volume</label><input type="range" id="audio-volume" class="form-range" min="0" max="1" step="0.1" value="0.5"></li><li class="ms-2"><label>Comment Display Options</label><div class="form-check"><input class="form-check-input" type="radio" name="comment-display" id="show-all-comments" checked><label class="form-check-label" for="show-all-comments">Show All Comments</label></div><div class="form-check"><input class="form-check-input" type="radio" name="comment-display" id="show-up-to-current-time"><label class="form-check-label" for="show-up-to-current-time">Show Comments Up to Current Time</label></div></li><li><a href="#" id="help-btn"><i class="bi bi-question-circle-fill"></i> Help</a></li></ul></nav><div id="overlay"></div><div id="content"><div class="container-fluid"><div class="row mt-4"><div class="col-md-8"><div id="video-container" class="mb-3"><div id="video-player"></div><div id="video-overlay"></div></div><div id="timeline-container" class="mb-3"><div id="timeline"></div></div><div class="mb-3 text-center"><button id="add-comment" class="btn btn-primary me-2" aria-label="Add Comment"><i class="bi bi-plus-circle"></i> Add Comment</button><div class="btn-group" role="group" aria-label="Comment navigation"><button id="prev-comment" class="btn btn-secondary" aria-label="Previous Comment" data-bs-toggle="tooltip" title="Previous Comment"><i class="bi bi-skip-backward-fill"></i></button><button id="next-comment" class="btn btn-secondary" aria-label="Next Comment" data-bs-toggle="tooltip" title="Next Comment"><i class="bi bi-skip-forward-fill"></i></button></div><button id="export-comments" class="btn btn-info ms-2" aria-label="Share Comments"><i class="bi bi-share-fill"></i> Share Comments</button><button id="export-subtitles" class="btn btn-secondary ms-2" aria-label="Export Comments as Subtitles"><i class="bi bi-download"></i> Export Comments as Subtitles</button></div></div><div class="col-md-4"><h4>Comments</h4><div id="comment-feed" class="list-group" aria-label="List of comments"></div></div></div></div></div><div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content bg-dark text-light"><div class="modal-header"><h5 class="modal-title" id="commentModalLabel">Add Comment</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><form id="comment-form"><div class="modal-body"><div class="mb-3"><label for="comment-text" class="form-label">Comment</label><textarea id="comment-text" class="form-control" rows="3" required></textarea></div><div class="mb-3"><label for="comment-category" class="form-label">Category</label><select id="comment-category" class="form-select"><option value="teamplay">Teamplay</option><option value="mechanics">Mechanics</option><option value="portaling">Portaling</option><option value="movement">Movement</option><option value="game_sense">Game Sense</option></select></div><div class="mb-3"><label for="comment-sentiment" class="form-label">Sentiment</label><select id="comment-sentiment" class="form-select"><option value="good">Good</option><option value="warning">Warning</option><option value="bad">Bad</option></select></div><div class="mb-3"><label for="comment-author" class="form-label">Your Name (optional)</label><input type="text" id="comment-author" class="form-control"></div><div class="mb-3"><label for="comment-time" class="form-label">Timestamp</label><input type="text" id="comment-time" class="form-control" readonly></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Save Comment</button><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Cancel">Cancel</button></div></form></div></div></div><div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content bg-dark text-light"><div class="modal-header"><h5 class="modal-title" id="importModalLabel">Import Comments</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><form id="import-form"><div class="modal-body"><div class="mb-3"><label for="import-text" class="form-label">Paste the shared link or string:</label><textarea id="import-text" class="form-control" rows="3" placeholder="Paste here..." required></textarea></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Import</button><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Cancel">Cancel</button></div></form></div></div></div><div class="modal fade" id="newVideoModal" tabindex="-1" aria-labelledby="newVideoModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content bg-dark text-light"><div class="modal-header"><h5 class="modal-title" id="newVideoModalLabel">Load New Video</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><form id="new-video-form"><div class="modal-body"><div class="mb-3"><label for="new-video-url" class="form-label">YouTube Video URL</label><input type="text" id="new-video-url" class="form-control" placeholder="Enter YouTube video URL" required></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Load Video</button><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Cancel">Cancel</button></div></form></div></div></div><div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content bg-light text-dark"><div class="modal-header"><h5 class="modal-title" id="helpModalLabel">Help & Tutorial</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><h4>Welcome to the FPS Gameplay Review Tool!</h4><p>This application allows coaches to annotate videos and share their feedback with students.</p><h5>Modes:</h5><ul><li><strong>Coach Mode:</strong> Load videos, add comments, and share annotations.</li><li><strong>Student Mode:</strong> Import annotations shared by a coach and review the feedback.</li></ul><h5>Getting Started:</h5><ol><li>Select your mode using the toggle switch in the navbar.</li><li>In <strong>Coach Mode</strong>, load a video and add comments at specific timestamps.</li><li>In <strong>Student Mode</strong>, import comments using a link or string provided by your coach.</li></ol><h5>Controls:</h5><ul><li><strong>Add Comment:</strong> Add a new annotation at the current timestamp (Coach Mode only).</li><li><strong>Previous/Next Comment:</strong> Navigate between comments.</li><li><strong>Share Comments:</strong> Generate a shareable link with your annotations (Coach Mode only).</li><li><strong>Export Comments as Subtitles:</strong> Download your comments as a subtitle file to use with your own video files.</li></ul><h5>Settings:</h5><ul><li><strong>Sound Notifications:</strong> Enable or disable audio cues when comments appear.</li><li><strong>Comment Display:</strong> Choose to show all comments or only those up to the current time.</li></ul><p>If you have any questions or need assistance, feel free to reach out!</p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Close</button></div></div></div></div><div class="modal fade" id="savedVideosModal" tabindex="-1" aria-labelledby="savedVideosModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content bg-light text-dark"><div class="modal-header"><h5 class="modal-title" id="savedVideosModalLabel">Saved Reviews</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div id="saved-videos-list" class="list-group"></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Close</button></div></div></div></div><div id="toast-container" aria-live="polite" aria-atomic="true"></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script><script src="https://www.youtube.com/iframe_api"></script><script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script><script>(function(){'use strict';let player;let comments=[];let videoId='';let currentCommentIndex=-1;let enableAudioNotifications=false;let audioVolume=0.5;let mode='Coach';let audioContext;let userInteracted=false;let videoTitle='';let videoThumbnailUrl='';document.addEventListener('DOMContentLoaded',()=>{if(!localStorage.getItem('visited')){const helpModal=new bootstrap.Modal(document.getElementById('helpModal'));helpModal.show();localStorage.setItem('visited','true')}initUI();const tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));tooltipTriggerList.map(function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl)})});function initUI(){const sidebar=document.getElementById('sidebar');const overlay=document.getElementById('overlay');const sidebarCollapse=document.getElementById('sidebarCollapse');sidebarCollapse.addEventListener('click',()=>{sidebar.classList.toggle('active');overlay.style.display=sidebar.classList.contains('active')?'block':'none'});overlay.addEventListener('click',()=>{sidebar.classList.remove('active');overlay.style.display='none'});initEventListeners()}function initEventListeners(){document.getElementById('mode-toggle').addEventListener('change',e=>{confirmModeSwitch()});document.getElementById('new-video-btn').addEventListener('click',()=>{if(mode==='Coach'){if(comments.length>0){if(!confirm('Loading a new video will discard your current comments. Do you wish to continue?')){return}}const newVideoModal=new bootstrap.Modal(document.getElementById('newVideoModal'));newVideoModal.show()}closeSidebar()});document.getElementById('new-video-form').addEventListener('submit',e=>{e.preventDefault();const userVideoUrl=document.getElementById('new-video-url').value.trim();const extractedVideoId=extractVideoID(userVideoUrl);if(extractedVideoId){videoId=extractedVideoId;comments=[];currentCommentIndex=-1;videoTitle='';videoThumbnailUrl='';saveComments();loadVideo(videoId);const newVideoModal=bootstrap.Modal.getInstance(document.getElementById('newVideoModal'));newVideoModal.hide();document.getElementById('new-video-form').reset();showToast('Video loaded successfully.','success')}else{showToast('Invalid YouTube URL. Please try again.','danger')}});document.getElementById('import-comments-btn').addEventListener('click',()=>{if(mode==='Student'){const importModal=new bootstrap.Modal(document.getElementById('importModal'));importModal.show()}closeSidebar()});document.getElementById('import-form').addEventListener('submit',e=>{e.preventDefault();const inputData=document.getElementById('import-text').value.trim();if(inputData){importComments(inputData)}});document.getElementById('add-comment').addEventListener('click',()=>{if(mode==='Coach'){const currentTime=player.getCurrentTime();document.getElementById('comment-time').value=formatTime(currentTime);const commentModal=new bootstrap.Modal(document.getElementById('commentModal'));commentModal.show()}});document.getElementById('comment-form').addEventListener('submit',e=>{e.preventDefault();addComment()});document.getElementById('prev-comment').addEventListener('click',()=>{navigateToComment(-1)});document.getElementById('next-comment').addEventListener('click',()=>{navigateToComment(1)});document.querySelectorAll('input[name="comment-display"]').forEach(elem=>{elem.addEventListener('change',()=>{updateCommentFeed()})});document.getElementById('audio-notifications').addEventListener('change',e=>{enableAudioNotifications=e.target.checked;if(enableAudioNotifications&&!audioContext){initAudioContext()}});document.getElementById('audio-volume').addEventListener('input',e=>{audioVolume=parseFloat(e.target.value)});document.getElementById('help-btn').addEventListener('click',()=>{const helpModal=new bootstrap.Modal(document.getElementById('helpModal'));helpModal.show();closeSidebar()});document.body.addEventListener('click',()=>{if(!userInteracted){userInteracted=true;if(enableAudioNotifications&&!audioContext){initAudioContext()}}})}function closeSidebar(){const sidebar=document.getElementById('sidebar');const overlay=document.getElementById('overlay');sidebar.classList.remove('active');overlay.style.display='none'}function initAudioContext(){try{audioContext=new(window.AudioContext||window.webkitAudioContext)()}catch(e){showToast('Web Audio API is not supported in this browser.','warning');enableAudioNotifications=false;document.getElementById('audio-notifications').checked=false}}window.onYouTubeIframeAPIReady=function(){};function loadVideo(videoId){if(player){player.destroy()}player=new YT.Player('video-player',{height:'390',width:'640',videoId:videoId,playerVars:{'enablejsapi':1,'origin':window.location.origin},events:{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange}});fetchVideoDetails(videoId)}function fetchVideoDetails(videoId){const apiKey='YOUR_YOUTUBE_DATA_API_KEY';const apiUrl=`https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${videoId}&key=${apiKey}`;fetch(apiUrl).then(response=>response.json()).then(data=>{if(data.items&&data.items.length>0){videoTitle=data.items[0].snippet.title;videoThumbnailUrl=data.items[0].snippet.thumbnails.default.url;saveVideoData()}else{videoTitle='Unknown Title';videoThumbnailUrl=''}}).catch(error=>{console.error('Error fetching video details:',error);videoTitle='Unknown Title';videoThumbnailUrl=''}}function onPlayerReady(event){loadComments();createTimelineMarkers();updateCommentFeed();syncComments()}function onPlayerStateChange(event){if(event.data==YT.PlayerState.PLAYING){syncComments()}}function syncComments(){if(!player)return;const currentTime=player.getCurrentTime();let nextCommentIndex=comments.findIndex(comment=>comment.time>currentTime);if(nextCommentIndex===-1){nextCommentIndex=comments.length}if(currentCommentIndex!==nextCommentIndex-1){currentCommentIndex=nextCommentIndex-1;displayCommentOverlay(comments[currentCommentIndex]);highlightCommentInFeed(currentCommentIndex);if(enableAudioNotifications&&comments[currentCommentIndex]){playSoundForCategory(comments[currentCommentIndex].category)}}if(player.getPlayerState()==YT.PlayerState.PLAYING){requestAnimationFrame(syncComments)}}function displayCommentOverlay(comment){const overlay=document.getElementById('video-overlay');overlay.innerHTML='';if(comment){const commentElem=document.createElement('div');commentElem.className='video-comment';commentElem.textContent=comment.text;overlay.appendChild(commentElem)}}function highlightCommentInFeed(index){const commentItems=document.querySelectorAll('.comment-item');commentItems.forEach((item,idx)=>{item.classList.toggle('active',idx===index)})}function createTimelineMarkers(){const timeline=document.getElementById('timeline');timeline.innerHTML='';const videoDuration=player.getDuration();comments.forEach((comment,index)=>{const marker=document.createElement('div');marker.className='timeline-marker';marker.style.left=(comment.time/videoDuration*100)+'%';marker.title=comment.text;marker.addEventListener('click',()=>{player.seekTo(comment.time)});timeline.appendChild(marker)})}function updateCommentFeed(){const commentFeed=document.getElementById('comment-feed');commentFeed.innerHTML='';const showUpToCurrentTime=document.getElementById('show-up-to-current-time').checked;const currentTime=player?player.getCurrentTime():0;let filteredComments=comments;if(showUpToCurrentTime&&player){filteredComments=comments.filter(comment=>comment.time<=currentTime)}filteredComments.forEach((comment,index)=>{const item=document.createElement('a');item.href='#';item.className='list-group-item list-group-item-action comment-item';item.textContent=formatTime(comment.time)+' - '+comment.text;item.addEventListener('click',e=>{e.preventDefault();player.seekTo(comment.time)});item.classList.add('sentiment-'+comment.sentiment);commentFeed.appendChild(item)});highlightCommentInFeed(currentCommentIndex)}function addComment(){const text=document.getElementById('comment-text').value.trim();const category=document.getElementById('comment-category').value;const sentiment=document.getElementById('comment-sentiment').value;const author=document.getElementById('comment-author').value.trim()||'Anonymous';const timestamp=player.getCurrentTime();if(text){const comment={time:timestamp,text:text,category:category,sentiment:sentiment,author:author};comments.push(comment);comments.sort((a,b)=>a.time-b.time);saveComments();createTimelineMarkers();updateCommentFeed();const commentModal=bootstrap.Modal.getInstance(document.getElementById('commentModal'));commentModal.hide();document.getElementById('comment-form').reset();showToast('Comment added successfully.','success')}}function navigateToComment(direction){if(!player||comments.length===0)return;let newIndex=currentCommentIndex+direction;if(newIndex<0){newIndex=0}else if(newIndex>=comments.length){newIndex=comments.length-1}currentCommentIndex=newIndex;player.seekTo(comments[newIndex].time);highlightCommentInFeed(currentCommentIndex);displayCommentOverlay(comments[currentCommentIndex])}function formatTime(seconds){const sec_num=parseInt(seconds,10);const hours=Math.floor(sec_num/3600);const minutes=Math.floor((sec_num-(hours*3600))/60);const secs=sec_num-(hours*3600)-(minutes*60);return[hours,minutes,secs].map(v=>v<10?'0'+v:v).filter((v,i)=>v!=='00'||i>0).join(':')}document.getElementById('export-comments').addEventListener('click',()=>{if(mode==='Coach'){const data={videoId:videoId,comments:comments};const compressedData=LZString.compressToEncodedURIComponent(JSON.stringify(data));const shareableUrl=`${window.location.origin}${window.location.pathname}?data=${compressedData}`;prompt('Copy and share this URL:',shareableUrl)}});function exportCommentsAsSRT(){let srtContent='';comments.forEach((comment,index)=>{const startTime=formatSRTTime(comment.time);const endTime=formatSRTTime(comment.time+5);srtContent+=`${index+1}\n${startTime} --> ${endTime}\n${comment.text}\n\n`});const blob=new Blob([srtContent],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='comments.srt';document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url)}function formatSRTTime(seconds){const date=new Date(null);date.setSeconds(seconds);const result=date.toISOString().substr(11,12).replace('.',',');return result}document.getElementById('export-subtitles').addEventListener('click',exportCommentsAsSRT);function importComments(inputData){const urlParams=new URLSearchParams(inputData.split('?')[1]);if(urlParams.has('data')){const compressedData=urlParams.get('data');try{const decompressedData=JSON.parse(LZString.decompressFromEncodedURIComponent(compressedData));videoId=decompressedData.videoId;comments=decompressedData.comments;videoTitle='';videoThumbnailUrl='';loadVideo(videoId);const importModal=bootstrap.Modal.getInstance(document.getElementById('importModal'));importModal.hide();document.getElementById('import-form').reset();showToast('Comments imported successfully.','success')}catch(error){showToast('Failed to load data from input.','danger')}}else{showToast('Invalid input. Please ensure you have pasted the correct link or string.','warning')}}function extractVideoID(url){const regex=/(?:\?v=|\/embed\/|\.be\/)([^&#?]+)/;const match=url.match(regex);return match&&match[1]?match[1]:null}function saveVideoData(){const key=`${mode.toLowerCase()}_video_${videoId}`;const data={videoId:videoId,comments:comments,videoTitle:videoTitle,thumbnailUrl:videoThumbnailUrl,timestamp:new Date().getTime()};localStorage.setItem(key,JSON.stringify(data))}function saveComments(){saveVideoData()}function loadComments(){const key=`${mode.toLowerCase()}_video_${videoId}`;const storedData=localStorage.getItem(key);if(storedData){const data=JSON.parse(storedData);comments=data.comments||[]}else{comments=[]}}function loadSavedVideos(){const savedVideos=[];for(let i=0;i<localStorage.length;i++){const key=localStorage.key(i);if(key.startsWith(`${mode.toLowerCase()}_video_`)){const data=JSON.parse(localStorage.getItem(key));savedVideos.push({key,data})}}return savedVideos.sort((a,b)=>b.data.timestamp-a.data.timestamp)}function displaySavedVideos(){const savedVideosList=document.getElementById('saved-videos-list');savedVideosList.innerHTML='';const savedVideos=loadSavedVideos();if(savedVideos.length===0){savedVideosList.innerHTML='<p>No saved reviews found.</p>';return}savedVideos.forEach(({key,data})=>{const item=document.createElement('div');item.className='list-group-item d-flex align-items-center';const thumbnail=document.createElement('img');thumbnail.src=data.thumbnailUrl||'https://via.placeholder.com/120x90.png?text=No+Image';thumbnail.alt=data.videoTitle||'Video Thumbnail';thumbnail.className='video-thumbnail me-3';const content=document.createElement('div');content.className='flex-grow-1';const title=document.createElement('h5');title.textContent=data.videoTitle||'Unknown Title';const date=new Date(data.timestamp);const dateText=document.createElement('small');dateText.className='text-muted';dateText.textContent=`Saved on ${date.toLocaleString()}`;content.appendChild(title);content.appendChild(dateText);const actions=document.createElement('div');actions.className='ms-auto';const loadBtn=document.createElement('button');loadBtn.className='btn btn-primary btn-sm me-2';loadBtn.textContent='Load';loadBtn.addEventListener('click',()=>{loadSavedVideoData(key);const savedVideosModal=bootstrap.Modal.getInstance(document.getElementById('savedVideosModal'));savedVideosModal.hide()});const deleteBtn=document.createElement('button');deleteBtn.className='btn btn-danger btn-sm';deleteBtn.textContent='Delete';deleteBtn.addEventListener('click',()=>{if(confirm('Are you sure you want to delete this saved review?')){localStorage.removeItem(key);displaySavedVideos()}});actions.appendChild(loadBtn);actions.appendChild(deleteBtn);item.appendChild(thumbnail);item.appendChild(content);item.appendChild(actions);savedVideosList.appendChild(item)})}function loadSavedVideoData(key){const data=JSON.parse(localStorage.getItem(key));if(data){videoId=data.videoId;comments=data.comments;videoTitle=data.videoTitle;videoThumbnailUrl=data.thumbnailUrl;loadVideo(videoId);showToast('Review loaded successfully.','success')}else{showToast('Failed to load saved review.','danger')}}document.getElementById('saved-videos-btn').addEventListener('click',()=>{displaySavedVideos();const savedVideosModal=new bootstrap.Modal(document.getElementById('savedVideosModal'));savedVideosModal.show()});function playSoundForCategory(category){if(!audioContext)return;let frequency=440;let duration=0.5;switch(category){case'teamplay':frequency=523.25;break;case'mechanics':frequency=587.33;break;case'portaling':frequency=659.25;break;case'movement':frequency=698.46;break;case'game_sense':frequency=783.99;break;default:frequency=440}const oscillator=audioContext.createOscillator();oscillator.type='sine';oscillator.frequency.setValueAtTime(frequency,audioContext.currentTime);const gainNode=audioContext.createGain();gainNode.gain.setValueAtTime(audioVolume,audioContext.currentTime);oscillator.connect(gainNode);gainNode.connect(audioContext.destination);oscillator.start();oscillator.stop(audioContext.currentTime+duration)}function confirmModeSwitch(){const newMode=mode==='Coach'?'Student':'Coach';if(comments.length>0||videoId){if(!confirm(`Switch to ${newMode} mode? This will reset the current session.`)){document.getElementById('mode-toggle').checked=mode==='Student';return}}mode=newMode;document.getElementById('current-mode').textContent=mode;videoId='';comments=[];currentCommentIndex=-1;videoTitle='';videoThumbnailUrl='';if(player){player.destroy();player=null}document.getElementById('video-player').innerHTML='';document.getElementById('timeline').innerHTML='';document.getElementById('comment-feed').innerHTML='';showToast(`Switched to ${mode} mode.`,'info');updateUIBasedOnMode()}function updateUIBasedOnMode(){const addCommentBtn=document.getElementById('add-comment');const exportCommentsBtn=document.getElementById('export-comments');const newVideoBtn=document.getElementById('new-video-btn');const importCommentsLi=document.getElementById('import-comments-li');const modeToggle=document.getElementById('mode-toggle');if(mode==='Coach'){addCommentBtn.classList.remove('disabled');exportCommentsBtn.classList.remove('disabled');newVideoBtn.classList.remove('disabled');importCommentsLi.style.display='none';modeToggle.checked=false}else{addCommentBtn.classList.add('disabled');exportCommentsBtn.classList.add('disabled');newVideoBtn.classList.add('disabled');importCommentsLi.style.display='block';modeToggle.checked=true}}function showToast(message,type){const toastContainer=document.getElementById('toast-container');const toastEl=document.createElement('div');toastEl.className=`toast align-items-center text-white bg-${type} border-0`;toastEl.role='alert';toastEl.setAttribute('aria-live','assertive');toastEl.setAttribute('aria-atomic','true');toastEl.innerHTML=`<div class="d-flex"><div class="toast-body">${message}</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>`;toastContainer.appendChild(toastEl);const toast=new bootstrap.Toast(toastEl,{delay:3000});toast.show();toastEl.addEventListener('hidden.bs.toast',()=>{toastEl.remove()})}updateUIBasedOnMode()})();</script></body></html>
